
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- &copy; International Business Machines Corporation, 2004 -->
<!-- &copy; The University of Edinburgh, 2004 -->
<head>
<title>How to Write an OGSA-DAI Role Map Document</title>
<link rel="stylesheet" type="text/css" href="../../style.css"/>
</head>
<body>
<h1>How to Write an OGSA-DAI Role Map Document</h1>
<p>
To write a simple OGSA-DAI role map document:
</p>
<ol>
<li>
Copy the following XML document:
<pre class="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;DatabaseRoles&gt;
  &lt;Database name="DATABASE-URI"&gt;
    &lt;User dn="CREDENTIAL" userid="USER-ID" password="PASSWORD"/&gt;
  &lt;/Database&gt;
&lt;/DatabaseRoles&gt;
</pre>
</li>
<li>
Replace <span class="xml">DATABASE-URI</span> with the driver-specific
URI of your data resource. This should match the content of the <span
class="xml">dataResource.driver.uri</span> element within the data
resource configuration document refering to this role map document.
</li>
<li>
Replace <span class="xml">CREDENTIAL</span> with an allowed client's
credentials. These must match the credentials that the client has in
their X509 certificate.
<ul>
<li>
If any client is to be allowed access to the database then replace
<span class="xml">CREDENTIAL</span> with
<span class="xml">No Certificate Provided</span>
</li>
<li>
<span class="important">Note</span> that if no such entry is provided
then anonymous data resource access will not be permitted.
</li>
</ul>
</li>
<li>
Replace <span class="xml">USER-ID</span> with a database user ID.
</li>
<li>
Replace <span class="xml">PASSWORD</span> with the corresponding
database password.
</li>
<li>
If you want to allow access to more than one client then make a copy
of the <span class="xml">User</span> element for each client and edit
as described above.
</li>
</ol>

<h2>Encrypting a Simple OGSA-DAI Role Map Document</h2>
<p>
To encrypt a simple OGSA-DAI role map document, run the OGSA-DAI <span
class="java">EncryptRoleMapperFile</span> tool:
</p>
<pre class="commandline">
$ java uk.org.ogsadai.common.rolemap.EncryptRoleMapperFile
  ENCRYPTION-PASSWORD ROLE-MAP-DOCUMENT
</pre>
<p>
Where
</p>
<ul>
<li>
<span class="commandline">ENCRYPTION-PASSWORD</span> - a
password that must be supplied when the role map document is
decrypted.
</li>
<li>
<span class="commandline">ROLE-MAP-DOCUMENT</span> - a simple role
map document.
</li>
</ul>
<p>
<span class="commandline">ROLE-MAP-DOCUMENT</span> will now hold an
encrypted OGSA-DAI role map document.
</p>

<h2>Decrypting an Encrypted OGSA-DAI Role Map Document</h2>
<p>
To decrypt an encrypted OGSA-DAI role map document, run the OGSA-DAI <span
class="java">DecryptRoleMapperFile</span> tool:
</p>
<pre class="commandline">
$ java uk.org.ogsadai.common.rolemap.DecryptRoleMapperFile
  ENCRYPTION-PASSWORD ROLE-MAP-DOCUMENT
</pre>
<p>
Where
</p>
<ul>
<li>
<span class="commandline">ENCRYPTION-PASSWORD</span> - a
password used to originally encrypt the role map document.
</li>
<li>
<span class="commandline">ROLE-MAP-DOCUMENT</span> - the
encrypted role map document.
</li>
</ul>
<p>
<span class="commandline">ROLE-MAP-DOCUMENT</span> will now hold the
decrypted OGSA-DAI role map document.
</p>

<hr/>
<table width="100%" summary="Navigation" class="footer">
<tr>
<td class="footer">Back: <a href="RoleMapEncrypted.html">Encrypted OGSA-DAI Role Map Documents</a></td>
<td class="footer">Up: <a href="index.html">Data Resource Configuration</a></td>
<td class="footer">Next: <a href="RoleMapEncryptedUse.html">How to Use
an Encrypted OGSA-DAI Role Map Document</a></td>
<td/>
</tr>
<tr>
<td>
&copy; International Business Machines Corporation, 2004.
</td>
<td>
&copy; The University of Edinburgh, 2004.
</td>
<td/>
</tr>
</table>
</body>
</html>
